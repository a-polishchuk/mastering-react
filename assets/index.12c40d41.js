import{r as p,d as tt,j as l,L as rt,P as nt,b as x,B as Fe,F as at,T as it,C as ot}from"./index.eecdbe03.js";import{u as we}from"./UserContext.b4cb0323.js";/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Le(e,n,t,a){function i(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function f(c){try{o(a.next(c))}catch(v){s(v)}}function h(c){try{o(a.throw(c))}catch(v){s(v)}}function o(c){c.done?r(c.value):i(c.value).then(f,h)}o((a=a.apply(e,n||[])).next())})}function Me(e,n){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},a,i,r,s;return s={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function f(o){return function(c){return h([o,c])}}function h(o){if(a)throw new TypeError("Generator is already executing.");for(;t;)try{if(a=1,i&&(r=o[0]&2?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[o[0]&2,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,i=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(o[0]===6||o[0]===2)){t=0;continue}if(o[0]===3&&(!r||o[1]>r[0]&&o[1]<r[3])){t.label=o[1];break}if(o[0]===6&&t.label<r[1]){t.label=r[1],r=o;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(o);break}r[2]&&t.ops.pop(),t.trys.pop();continue}o=n.call(e,t)}catch(c){o=[6,c],i=0}finally{a=r=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}var I=function(){},R=I(),X=Object,w=function(e){return e===R},L=function(e){return typeof e=="function"},W=function(e,n){return X.assign({},e,n)},Ee="undefined",ye=function(){return typeof window!=Ee},ut=function(){return typeof document!=Ee},st=function(){return ye()&&typeof window.requestAnimationFrame!=Ee},ae=new WeakMap,ct=0,ee=function(e){var n=typeof e,t=e&&e.constructor,a=t==Date,i,r;if(X(e)===e&&!a&&t!=RegExp){if(i=ae.get(e),i)return i;if(i=++ct+"~",ae.set(e,i),t==Array){for(i="@",r=0;r<e.length;r++)i+=ee(e[r])+",";ae.set(e,i)}if(t==X){i="#";for(var s=X.keys(e).sort();!w(r=s.pop());)w(e[r])||(i+=r+":"+ee(e[r])+",");ae.set(e,i)}}else i=a?e.toJSON():n=="symbol"?e.toString():n=="string"?JSON.stringify(e):""+e;return i},me=!0,lt=function(){return me},Pe=ye(),Ce=ut(),pe=Pe&&window.addEventListener?window.addEventListener.bind(window):I,ft=Ce?document.addEventListener.bind(document):I,be=Pe&&window.removeEventListener?window.removeEventListener.bind(window):I,dt=Ce?document.removeEventListener.bind(document):I,vt=function(){var e=Ce&&document.visibilityState;return w(e)||e!=="hidden"},ht=function(e){return ft("visibilitychange",e),pe("focus",e),function(){dt("visibilitychange",e),be("focus",e)}},mt=function(e){var n=function(){me=!0,e()},t=function(){me=!1};return pe("online",n),pe("offline",t),function(){be("online",n),be("offline",t)}},pt={isOnline:lt,isVisible:vt},bt={initFocus:ht,initReconnect:mt},oe=!ye()||"Deno"in window,Rt=function(e){return st()?window.requestAnimationFrame(e):setTimeout(e,1)},Y=oe?p.exports.useEffect:p.exports.useLayoutEffect,ve=typeof navigator<"u"&&navigator.connection,Ne=!oe&&ve&&(["slow-2g","2g"].includes(ve.effectiveType)||ve.saveData),ke=function(e){if(L(e))try{e=e()}catch{e=""}var n=[].concat(e);e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?ee(e):"";var t=e?"$swr$"+e:"";return[e,n,t]},q=new WeakMap,$e=0,qe=1,je=2,Z=function(e,n,t,a,i,r,s){s===void 0&&(s=!0);var f=q.get(e),h=f[0],o=f[1],c=f[3],v=h[n],d=o[n];if(s&&d)for(var N=0;N<d.length;++N)d[N](t,a,i);return r&&(delete c[n],v&&v[0])?v[0](je).then(function(){return e.get(n)}):e.get(n)},gt=0,Re=function(){return++gt},He=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Le(void 0,void 0,void 0,function(){var t,a,i,r,s,f,h,o,c,v,d,N,te,E,m,u,G,M,U,_,P;return Me(this,function(V){switch(V.label){case 0:if(t=e[0],a=e[1],i=e[2],r=e[3],s=typeof r=="boolean"?{revalidate:r}:r||{},f=w(s.populateCache)?!0:s.populateCache,h=s.revalidate!==!1,o=s.rollbackOnError!==!1,c=s.optimisticData,v=ke(a),d=v[0],N=v[2],!d)return[2];if(te=q.get(t),E=te[2],e.length<3)return[2,Z(t,d,t.get(d),R,R,h,!0)];if(m=i,G=Re(),E[d]=[G,0],M=!w(c),U=t.get(d),M&&(_=L(c)?c(U):c,t.set(d,_),Z(t,d,_)),L(m))try{m=m(t.get(d))}catch(k){u=k}return m&&L(m.then)?[4,m.catch(function(k){u=k})]:[3,2];case 1:if(m=V.sent(),G!==E[d][0]){if(u)throw u;return[2,m]}else u&&M&&o&&(f=!0,m=U,t.set(d,U));V.label=2;case 2:return f&&(u||(L(f)&&(m=f(m,U)),t.set(d,m)),t.set(N,W(t.get(N),{error:u}))),E[d][1]=Re(),[4,Z(t,d,m,u,R,h,!!f)];case 3:if(P=V.sent(),u)throw u;return[2,f?P:m]}})})},Ue=function(e,n){for(var t in e)e[t][0]&&e[t][0](n)},Ge=function(e,n){if(!q.has(e)){var t=W(bt,n),a={},i=He.bind(R,e),r=I;if(q.set(e,[a,{},{},{},i]),!oe){var s=t.initFocus(setTimeout.bind(R,Ue.bind(R,a,$e))),f=t.initReconnect(setTimeout.bind(R,Ue.bind(R,a,qe)));r=function(){s&&s(),f&&f(),q.delete(e)}}return[e,i,r]}return[e,q.get(e)[4]]},wt=function(e,n,t,a,i){var r=t.errorRetryCount,s=i.retryCount,f=~~((Math.random()+.5)*(1<<(s<8?s:8)))*t.errorRetryInterval;!w(r)&&s>r||setTimeout(a,f,i)},Ke=Ge(new Map),ze=Ke[0],Et=Ke[1],Be=W({onLoadingSlow:I,onSuccess:I,onError:I,onErrorRetry:wt,onDiscarded:I,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Ne?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:Ne?5e3:3e3,compare:function(e,n){return ee(e)==ee(n)},isPaused:function(){return!1},cache:ze,mutate:Et,fallback:{}},pt),Je=function(e,n){var t=W(e,n);if(n){var a=e.use,i=e.fallback,r=n.use,s=n.fallback;a&&r&&(t.use=a.concat(r)),i&&s&&(t.fallback=W(i,s))}return t},ge=p.exports.createContext({}),yt=function(e){var n=e.value,t=Je(p.exports.useContext(ge),n),a=n&&n.provider,i=p.exports.useState(function(){return a?Ge(a(t.cache||ze),n):R})[0];return i&&(t.cache=i[0],t.mutate=i[1]),Y(function(){return i?i[2]:R},[]),p.exports.createElement(ge.Provider,W(e,{value:t}))},Ct=function(e,n){var t=p.exports.useState({})[1],a=p.exports.useRef(e),i=p.exports.useRef({data:!1,error:!1,isValidating:!1}),r=p.exports.useCallback(function(s){var f=!1,h=a.current;for(var o in s){var c=o;h[c]!==s[c]&&(h[c]=s[c],i.current[c]&&(f=!0))}f&&!n.current&&t({})},[]);return Y(function(){a.current=e}),[a,i.current,r]},St=function(e){return L(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}]},Qe=function(){return W(Be,p.exports.useContext(ge))},Tt=function(e){return function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];var i=Qe(),r=St(t),s=r[0],f=r[1],h=r[2],o=Je(i,h),c=e,v=o.use;if(v)for(var d=v.length;d-- >0;)c=v[d](c);return c(s,f||o.fetcher,o)}},Ae=function(e,n,t){var a=n[e]||(n[e]=[]);return a.push(t),function(){var i=a.indexOf(t);i>=0&&(a[i]=a[a.length-1],a.pop())}},he={dedupe:!0},xt=function(e,n,t){var a=t.cache,i=t.compare,r=t.fallbackData,s=t.suspense,f=t.revalidateOnMount,h=t.refreshInterval,o=t.refreshWhenHidden,c=t.refreshWhenOffline,v=q.get(a),d=v[0],N=v[1],te=v[2],E=v[3],m=ke(e),u=m[0],G=m[1],M=m[2],U=p.exports.useRef(!1),_=p.exports.useRef(!1),P=p.exports.useRef(u),V=p.exports.useRef(n),k=p.exports.useRef(t),b=function(){return k.current},ue=function(){return b().isVisible()&&b().isOnline()},re=function(S){return a.set(M,W(a.get(M),S))},xe=a.get(u),Ye=w(r)?t.fallback[u]:r,A=w(xe)?Ye:xe,_e=a.get(M)||{},K=_e.error,Oe=!U.current,De=function(){return Oe&&!w(f)?f:b().isPaused()?!1:s?w(A)?!1:t.revalidateIfStale:w(A)||t.revalidateIfStale},Ze=function(){return!u||!n?!1:_e.isValidating?!0:Oe&&De()},se=Ze(),ce=Ct({data:A,error:K,isValidating:se},_),j=ce[0],le=ce[1],ne=ce[2],$=p.exports.useCallback(function(S){return Le(void 0,void 0,void 0,function(){var y,C,T,z,B,O,g,F,D,fe,J,H,de;return Me(this,function(Q){switch(Q.label){case 0:if(y=V.current,!u||!y||_.current||b().isPaused())return[2,!1];z=!0,B=S||{},O=!E[u]||!B.dedupe,g=function(){return!_.current&&u===P.current&&U.current},F=function(){var Ie=E[u];Ie&&Ie[1]===T&&delete E[u]},D={isValidating:!1},fe=function(){re({isValidating:!1}),g()&&ne(D)},re({isValidating:!0}),ne({isValidating:!0}),Q.label=1;case 1:return Q.trys.push([1,3,,4]),O&&(Z(a,u,j.current.data,j.current.error,!0),t.loadingTimeout&&!a.get(u)&&setTimeout(function(){z&&g()&&b().onLoadingSlow(u,t)},t.loadingTimeout),E[u]=[y.apply(void 0,G),Re()]),de=E[u],C=de[0],T=de[1],[4,C];case 2:return C=Q.sent(),O&&setTimeout(F,t.dedupingInterval),!E[u]||E[u][1]!==T?(O&&g()&&b().onDiscarded(u),[2,!1]):(re({error:R}),D.error=R,J=te[u],!w(J)&&(T<=J[0]||T<=J[1]||J[1]===0)?(fe(),O&&g()&&b().onDiscarded(u),[2,!1]):(i(j.current.data,C)?D.data=j.current.data:D.data=C,i(a.get(u),C)||a.set(u,C),O&&g()&&b().onSuccess(C,u,t),[3,4]));case 3:return H=Q.sent(),F(),b().isPaused()||(re({error:H}),D.error=H,O&&g()&&(b().onError(H,u,t),(typeof t.shouldRetryOnError=="boolean"&&t.shouldRetryOnError||L(t.shouldRetryOnError)&&t.shouldRetryOnError(H))&&ue()&&b().onErrorRetry(H,u,t,$,{retryCount:(B.retryCount||0)+1,dedupe:!0}))),[3,4];case 4:return z=!1,fe(),g()&&O&&Z(a,u,D.data,D.error,!1),[2,!0]}})})},[u]),et=p.exports.useCallback(He.bind(R,a,function(){return P.current}),[]);if(Y(function(){V.current=n,k.current=t}),Y(function(){if(!!u){var S=u!==P.current,y=$.bind(R,he),C=function(g,F,D){ne(W({error:F,isValidating:D},i(j.current.data,g)?R:{data:g}))},T=0,z=function(g){if(g==$e){var F=Date.now();b().revalidateOnFocus&&F>T&&ue()&&(T=F+b().focusThrottleInterval,y())}else if(g==qe)b().revalidateOnReconnect&&ue()&&y();else if(g==je)return $()},B=Ae(u,N,C),O=Ae(u,d,z);return _.current=!1,P.current=u,U.current=!0,S&&ne({data:A,error:K,isValidating:se}),De()&&(w(A)||oe?y():Rt(y)),function(){_.current=!0,B(),O()}}},[u,$]),Y(function(){var S;function y(){var T=L(h)?h(A):h;T&&S!==-1&&(S=setTimeout(C,T))}function C(){!j.current.error&&(o||b().isVisible())&&(c||b().isOnline())?$(he).then(y):y()}return y(),function(){S&&(clearTimeout(S),S=-1)}},[h,o,c,$]),p.exports.useDebugValue(A),s&&w(A)&&u)throw V.current=n,k.current=t,_.current=!1,w(K)?$(he):K;return{mutate:et,get data(){return le.data=!0,A},get error(){return le.error=!0,K},get isValidating(){return le.isValidating=!0,se}}},_t=X.defineProperty(yt,"default",{value:Be}),Se=Tt(xt);const Ot=tt.create({baseURL:"https://jsonplaceholder.typicode.com/"});async function Dt(e){return(await Ot.get(e)).data}const ie={user:e=>`users/${e}`,todos:e=>`todos?userId=${e}`};function Te(){const e=we();return Se(ie.user(e))}const It="_loading_kg1qp_1",Nt="_error_kg1qp_7",We={loading:It,error:Nt};function Ut(){const{isValidating:e,data:n,error:t}=Te();return e?l("div",{className:We.loading,children:l(rt,{})}):t?l("div",{className:We.error,children:"Oops! Something went wrong..."}):l(nt,{title:"User Profile",data:n})}function Xe(){const e=we();return Se(ie.todos(e))}function At(){const{data:e,mutate:n}=Xe();return x("table",{children:[x("thead",{children:[x("tr",{children:[l("th",{colSpan:2,style:{fontSize:24},children:"Todos List"}),l("th",{children:l(Fe,{text:"Refresh",onClick:()=>n()})})]}),x("tr",{children:[l("th",{children:"#"}),l("th",{children:"Title"}),l("th",{children:"Completed"})]})]}),l("tbody",{children:e==null?void 0:e.map((t,a)=>x("tr",{children:[l("td",{children:a+1}),l("td",{children:t.title}),l("td",{children:t.completed&&"\u2705"})]},t.id))})]})}const Wt="_avatar_1ar4j_1",Vt={avatar:Wt};function Ft(){var t;const{data:e}=Te();return((t=e==null?void 0:e.name)!=null?t:"").split(" ").map(a=>a.charAt(0)).join("")}function Lt(){const e=Ft();return l("div",{className:Vt.avatar,children:e})}const Mt={refreshInterval:3e3};function Pt(){return new Promise(e=>{e(new Date)})}function kt(){return Se("lastUpdated",Pt,Mt)}const $t="_lastUpdated_v40lk_1",qt={lastUpdated:$t};function jt(){var t;const{data:e}=kt(),n=(t=e==null?void 0:e.toLocaleTimeString())!=null?t:"--";return x("div",{className:qt.lastUpdated,children:["Last updated:",l("br",{}),l("strong",{children:n})]})}function Ht(){const e=we(),{mutate:n}=Qe();return l(Fe,{text:"Refresh all",onClick:()=>{n(ie.user(e)),n(ie.todos(e))}})}const Gt="_todoCounter_1ecl3_1",Kt={todoCounter:Gt};function zt(){var t;const{data:e}=Xe(),n=(t=e==null?void 0:e.length)!=null?t:0;return x("div",{className:Kt.todoCounter,children:["Todos:",l("br",{}),l("strong",{children:n})]})}const Bt="_userName_6ppoc_1",Jt="_userEmail_6ppoc_5",Ve={userName:Bt,userEmail:Jt};function Qt(){const{data:e}=Te();return x(at,{children:[l("div",{className:Ve.userName,children:e==null?void 0:e.name}),l("div",{className:Ve.userEmail,children:e==null?void 0:e.email})]})}function Xt(){return x(it,{children:[l(Lt,{}),l("div",{style:{flex:1},children:l(Qt,{})}),l(zt,{}),l(jt,{}),l(Ht,{})]})}const Yt={fetcher:Dt};function tr(){return l(ot,{title:"SWR",subtitle:"Data fetching",children:x(_t,{value:Yt,children:[l(Xt,{}),x("div",{style:{display:"flex",flexDirection:"column",gap:24},children:[l(Ut,{}),l(At,{})]})]})})}export{tr as default};
