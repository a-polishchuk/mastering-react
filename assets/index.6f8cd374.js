import{r as p,a as tt,j as l,L as rt,P as nt,b as L,E as at,B as it,F as ot,T as ut,C as st}from"./index.10e4ef19.js";import{u as ge,T as ct}from"./UserContext.ebe22635.js";/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function We(e,r,t,a){function i(n){return n instanceof t?n:new t(function(s){s(n)})}return new(t||(t=Promise))(function(n,s){function f(c){try{o(a.next(c))}catch(v){s(v)}}function h(c){try{o(a.throw(c))}catch(v){s(v)}}function o(c){c.done?n(c.value):i(c.value).then(f,h)}o((a=a.apply(e,r||[])).next())})}function Me(e,r){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},a,i,n,s;return s={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function f(o){return function(c){return h([o,c])}}function h(o){if(a)throw new TypeError("Generator is already executing.");for(;t;)try{if(a=1,i&&(n=o[0]&2?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[o[0]&2,n.value]),o[0]){case 0:case 1:n=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,i=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(o[0]===6||o[0]===2)){t=0;continue}if(o[0]===3&&(!n||o[1]>n[0]&&o[1]<n[3])){t.label=o[1];break}if(o[0]===6&&t.label<n[1]){t.label=n[1],n=o;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(o);break}n[2]&&t.ops.pop(),t.trys.pop();continue}o=r.call(e,t)}catch(c){o=[6,c],i=0}finally{a=n=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}var O=function(){},E=O(),Z=Object,R=function(e){return e===E},W=function(e){return typeof e=="function"},N=function(e,r){return Z.assign({},e,r)},Se="undefined",we=function(){return typeof window!=Se},lt=function(){return typeof document!=Se},ft=function(){return we()&&typeof window.requestAnimationFrame!=Se},oe=new WeakMap,dt=0,te=function(e){var r=typeof e,t=e&&e.constructor,a=t==Date,i,n;if(Z(e)===e&&!a&&t!=RegExp){if(i=oe.get(e),i)return i;if(i=++dt+"~",oe.set(e,i),t==Array){for(i="@",n=0;n<e.length;n++)i+=te(e[n])+",";oe.set(e,i)}if(t==Z){i="#";for(var s=Z.keys(e).sort();!R(n=s.pop());)R(e[n])||(i+=n+":"+te(e[n])+",");oe.set(e,i)}}else i=a?e.toJSON():r=="symbol"?e.toString():r=="string"?JSON.stringify(e):""+e;return i},pe=!0,vt=function(){return pe},Pe=we(),ye=lt(),be=Pe&&window.addEventListener?window.addEventListener.bind(window):O,ht=ye?document.addEventListener.bind(document):O,Ee=Pe&&window.removeEventListener?window.removeEventListener.bind(window):O,mt=ye?document.removeEventListener.bind(document):O,pt=function(){var e=ye&&document.visibilityState;return R(e)||e!=="hidden"},bt=function(e){return ht("visibilitychange",e),be("focus",e),function(){mt("visibilitychange",e),Ee("focus",e)}},Et=function(e){var r=function(){pe=!0,e()},t=function(){pe=!1};return be("online",r),be("offline",t),function(){Ee("online",r),Ee("offline",t)}},Tt={isOnline:vt,isVisible:pt},Rt={initFocus:bt,initReconnect:Et},ue=!we()||"Deno"in window,gt=function(e){return ft()?window.requestAnimationFrame(e):setTimeout(e,1)},Q=ue?p.exports.useEffect:p.exports.useLayoutEffect,he=typeof navigator<"u"&&navigator.connection,Ue=!ue&&he&&(["slow-2g","2g"].includes(he.effectiveType)||he.saveData),ke=function(e){if(W(e))try{e=e()}catch{e=""}var r=[].concat(e);e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?te(e):"";var t=e?"$swr$"+e:"";return[e,r,t]},$=new WeakMap,je=0,$e=1,qe=2,ee=function(e,r,t,a,i,n,s){s===void 0&&(s=!0);var f=$.get(e),h=f[0],o=f[1],c=f[3],v=h[r],d=o[r];if(s&&d)for(var I=0;I<d.length;++I)d[I](t,a,i);return n&&(delete c[r],v&&v[0])?v[0](qe).then(function(){return e.get(r)}):e.get(r)},St=0,Te=function(){return++St},Be=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return We(void 0,void 0,void 0,function(){var t,a,i,n,s,f,h,o,c,v,d,I,ne,g,m,u,K,M,A,_,P;return Me(this,function(F){switch(F.label){case 0:if(t=e[0],a=e[1],i=e[2],n=e[3],s=typeof n=="boolean"?{revalidate:n}:n||{},f=R(s.populateCache)?!0:s.populateCache,h=s.revalidate!==!1,o=s.rollbackOnError!==!1,c=s.optimisticData,v=ke(a),d=v[0],I=v[2],!d)return[2];if(ne=$.get(t),g=ne[2],e.length<3)return[2,ee(t,d,t.get(d),E,E,h,!0)];if(m=i,K=Te(),g[d]=[K,0],M=!R(c),A=t.get(d),M&&(_=W(c)?c(A):c,t.set(d,_),ee(t,d,_)),W(m))try{m=m(t.get(d))}catch(k){u=k}return m&&W(m.then)?[4,m.catch(function(k){u=k})]:[3,2];case 1:if(m=F.sent(),K!==g[d][0]){if(u)throw u;return[2,m]}else u&&M&&o&&(f=!0,m=A,t.set(d,A));F.label=2;case 2:return f&&(u||(W(f)&&(m=f(m,A)),t.set(d,m)),t.set(I,N(t.get(I),{error:u}))),g[d][1]=Te(),[4,ee(t,d,m,u,E,h,!!f)];case 3:if(P=F.sent(),u)throw u;return[2,f?P:m]}})})},Le=function(e,r){for(var t in e)e[t][0]&&e[t][0](r)},He=function(e,r){if(!$.has(e)){var t=N(Rt,r),a={},i=Be.bind(E,e),n=O;if($.set(e,[a,{},{},{},i]),!ue){var s=t.initFocus(setTimeout.bind(E,Le.bind(E,a,je))),f=t.initReconnect(setTimeout.bind(E,Le.bind(E,a,$e)));n=function(){s&&s(),f&&f(),$.delete(e)}}return[e,i,n]}return[e,$.get(e)[4]]},wt=function(e,r,t,a,i){var n=t.errorRetryCount,s=i.retryCount,f=~~((Math.random()+.5)*(1<<(s<8?s:8)))*t.errorRetryInterval;!R(n)&&s>n||setTimeout(a,f,i)},Ke=He(new Map),Ge=Ke[0],yt=Ke[1],Je=N({onLoadingSlow:O,onSuccess:O,onError:O,onErrorRetry:wt,onDiscarded:O,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Ue?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:Ue?5e3:3e3,compare:function(e,r){return te(e)==te(r)},isPaused:function(){return!1},cache:Ge,mutate:yt,fallback:{}},Tt),ze=function(e,r){var t=N(e,r);if(r){var a=e.use,i=e.fallback,n=r.use,s=r.fallback;a&&n&&(t.use=a.concat(n)),i&&s&&(t.fallback=N(i,s))}return t},Re=p.exports.createContext({}),Ct=function(e){var r=e.value,t=ze(p.exports.useContext(Re),r),a=r&&r.provider,i=p.exports.useState(function(){return a?He(a(t.cache||Ge),r):E})[0];return i&&(t.cache=i[0],t.mutate=i[1]),Q(function(){return i?i[2]:E},[]),p.exports.createElement(Re.Provider,N(e,{value:t}))},_t=function(e,r){var t=p.exports.useState({})[1],a=p.exports.useRef(e),i=p.exports.useRef({data:!1,error:!1,isValidating:!1}),n=p.exports.useCallback(function(s){var f=!1,h=a.current;for(var o in s){var c=o;h[c]!==s[c]&&(h[c]=s[c],i.current[c]&&(f=!0))}f&&!r.current&&t({})},[]);return Q(function(){a.current=e}),[a,i.current,n]},xt=function(e){return W(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}]},Xe=function(){return N(Je,p.exports.useContext(Re))},Dt=function(e){return function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];var i=Xe(),n=xt(t),s=n[0],f=n[1],h=n[2],o=ze(i,h),c=e,v=o.use;if(v)for(var d=v.length;d-- >0;)c=v[d](c);return c(s,f||o.fetcher,o)}},Ne=function(e,r,t){var a=r[e]||(r[e]=[]);return a.push(t),function(){var i=a.indexOf(t);i>=0&&(a[i]=a[a.length-1],a.pop())}},me={dedupe:!0},Ot=function(e,r,t){var a=t.cache,i=t.compare,n=t.fallbackData,s=t.suspense,f=t.revalidateOnMount,h=t.refreshInterval,o=t.refreshWhenHidden,c=t.refreshWhenOffline,v=$.get(a),d=v[0],I=v[1],ne=v[2],g=v[3],m=ke(e),u=m[0],K=m[1],M=m[2],A=p.exports.useRef(!1),_=p.exports.useRef(!1),P=p.exports.useRef(u),F=p.exports.useRef(r),k=p.exports.useRef(t),b=function(){return k.current},se=function(){return b().isVisible()&&b().isOnline()},ae=function(y){return a.set(M,N(a.get(M),y))},xe=a.get(u),Ze=R(n)?t.fallback[u]:n,U=R(xe)?Ze:xe,De=a.get(M)||{},G=De.error,Oe=!A.current,Ie=function(){return Oe&&!R(f)?f:b().isPaused()?!1:s?R(U)?!1:t.revalidateIfStale:R(U)||t.revalidateIfStale},Qe=function(){return!u||!r?!1:De.isValidating?!0:Oe&&Ie()},ce=Qe(),le=_t({data:U,error:G,isValidating:ce},_),q=le[0],fe=le[1],ie=le[2],j=p.exports.useCallback(function(y){return We(void 0,void 0,void 0,function(){var S,w,C,J,z,x,T,V,D,de,X,B,ve;return Me(this,function(Y){switch(Y.label){case 0:if(S=F.current,!u||!S||_.current||b().isPaused())return[2,!1];J=!0,z=y||{},x=!g[u]||!z.dedupe,T=function(){return!_.current&&u===P.current&&A.current},V=function(){var Ae=g[u];Ae&&Ae[1]===C&&delete g[u]},D={isValidating:!1},de=function(){ae({isValidating:!1}),T()&&ie(D)},ae({isValidating:!0}),ie({isValidating:!0}),Y.label=1;case 1:return Y.trys.push([1,3,,4]),x&&(ee(a,u,q.current.data,q.current.error,!0),t.loadingTimeout&&!a.get(u)&&setTimeout(function(){J&&T()&&b().onLoadingSlow(u,t)},t.loadingTimeout),g[u]=[S.apply(void 0,K),Te()]),ve=g[u],w=ve[0],C=ve[1],[4,w];case 2:return w=Y.sent(),x&&setTimeout(V,t.dedupingInterval),!g[u]||g[u][1]!==C?(x&&T()&&b().onDiscarded(u),[2,!1]):(ae({error:E}),D.error=E,X=ne[u],!R(X)&&(C<=X[0]||C<=X[1]||X[1]===0)?(de(),x&&T()&&b().onDiscarded(u),[2,!1]):(i(q.current.data,w)?D.data=q.current.data:D.data=w,i(a.get(u),w)||a.set(u,w),x&&T()&&b().onSuccess(w,u,t),[3,4]));case 3:return B=Y.sent(),V(),b().isPaused()||(ae({error:B}),D.error=B,x&&T()&&(b().onError(B,u,t),(typeof t.shouldRetryOnError=="boolean"&&t.shouldRetryOnError||W(t.shouldRetryOnError)&&t.shouldRetryOnError(B))&&se()&&b().onErrorRetry(B,u,t,j,{retryCount:(z.retryCount||0)+1,dedupe:!0}))),[3,4];case 4:return J=!1,de(),T()&&x&&ee(a,u,D.data,D.error,!1),[2,!0]}})})},[u]),et=p.exports.useCallback(Be.bind(E,a,function(){return P.current}),[]);if(Q(function(){F.current=r,k.current=t}),Q(function(){if(!!u){var y=u!==P.current,S=j.bind(E,me),w=function(T,V,D){ie(N({error:V,isValidating:D},i(q.current.data,T)?E:{data:T}))},C=0,J=function(T){if(T==je){var V=Date.now();b().revalidateOnFocus&&V>C&&se()&&(C=V+b().focusThrottleInterval,S())}else if(T==$e)b().revalidateOnReconnect&&se()&&S();else if(T==qe)return j()},z=Ne(u,I,w),x=Ne(u,d,J);return _.current=!1,P.current=u,A.current=!0,y&&ie({data:U,error:G,isValidating:ce}),Ie()&&(R(U)||ue?S():gt(S)),function(){_.current=!0,z(),x()}}},[u,j]),Q(function(){var y;function S(){var C=W(h)?h(U):h;C&&y!==-1&&(y=setTimeout(w,C))}function w(){!q.current.error&&(o||b().isVisible())&&(c||b().isOnline())?j(me).then(S):S()}return S(),function(){y&&(clearTimeout(y),y=-1)}},[h,o,c,j]),p.exports.useDebugValue(U),s&&R(U)&&u)throw F.current=r,k.current=t,_.current=!1,R(G)?j(me):G;return{mutate:et,get data(){return fe.data=!0,U},get error(){return fe.error=!0,G},get isValidating(){return fe.isValidating=!0,ce}}},It=Z.defineProperty(Ct,"default",{value:Je}),Ce=Dt(Ot);const At=tt.create({baseURL:"https://jsonplaceholder.typicode.com/"});async function Ut(e){return(await At.get(e)).data}var H=(e=>(e.USER_DETAILS="user-details",e.TODO_LIST="todo-list",e.LAST_UPDATED="last-updated",e))(H||{});const re={["user-details"]:e=>`users/${e}`,["todo-list"]:e=>`todos?userId=${e}`,["last-updated"]:()=>"lastUpdated"};function _e(){const e=ge(),r=re[H.USER_DETAILS];return Ce(r(e))}const Lt="_loading_kg1qp_1",Nt="_error_kg1qp_7",Fe={loading:Lt,error:Nt};function Ft(){const{isValidating:e,data:r,error:t}=_e();return e?l("div",{className:Fe.loading,children:l(rt,{})}):t?l("div",{className:Fe.error,children:"Oops! Something went wrong..."}):l(nt,{data:r})}function Ye(){const e=ge(),r=re[H.TODO_LIST];return Ce(r(e))}function Vt(){const{data:e,mutate:r}=Ye();return L("table",{children:[l("thead",{children:L("tr",{children:[l("th",{children:l(at,{emoji:"\u{1F504}",tooltip:"Refetch",onClick:()=>r()})}),l("th",{children:"Title"}),l("th",{children:"Completed"})]})}),l("tbody",{children:e==null?void 0:e.map((t,a)=>L("tr",{children:[l("td",{children:a+1}),l("td",{children:t.title}),l("td",{children:t.completed?"\u2705":null})]},t.id))})]})}const Wt="_avatar_1ar4j_1",Mt={avatar:Wt};function Pt(){var t;const{data:e}=_e();return((t=e==null?void 0:e.name)!=null?t:"").split(" ").map(a=>a.charAt(0)).join("")}function kt(){const e=Pt();return l("div",{className:Mt.avatar,children:e})}const jt={refreshInterval:3e3};function $t(){return new Promise(e=>{e(new Date)})}function qt(){const e=re[H.LAST_UPDATED];return Ce(e(),$t,jt)}const Bt="_lastUpdated_v40lk_1",Ht={lastUpdated:Bt};function Kt(){var t;const{data:e}=qt(),r=(t=e==null?void 0:e.toLocaleTimeString())!=null?t:"--";return L("div",{className:Ht.lastUpdated,children:["Last updated:",l("br",{}),l("strong",{children:r})]})}function Gt(){const e=ge(),{mutate:r}=Xe();return l(it,{text:"Refresh all",onClick:()=>{r(re[H.USER_DETAILS](e)),r(re[H.TODO_LIST](e))}})}const Jt="_todoCounter_1ecl3_1",zt={todoCounter:Jt};function Xt(){var t;const{data:e}=Ye(),r=(t=e==null?void 0:e.length)!=null?t:0;return L("div",{className:zt.todoCounter,children:["Todos:",l("br",{}),l("strong",{children:r})]})}const Yt="_userName_6ppoc_1",Zt="_userEmail_6ppoc_5",Ve={userName:Yt,userEmail:Zt};function Qt(){const{data:e}=_e();return L(ot,{children:[l("div",{className:Ve.userName,children:e==null?void 0:e.name}),l("div",{className:Ve.userEmail,children:e==null?void 0:e.email})]})}function er(){return L(ut,{children:[l(kt,{}),l("div",{style:{flex:1},children:l(Qt,{})}),l(Xt,{}),l(Kt,{}),l(Gt,{})]})}const tr=["\u{1F464} User Profile","\u2705 Todos List"];function ar(){return l(st,{title:"SWR",subtitle:"Data fetching",children:L(It,{value:{fetcher:Ut},children:[l(er,{}),L(ct,{tabs:tr,children:[l(Ft,{}),l(Vt,{})]})]})})}export{ar as default};
