import{r as b,i as oe,j as E}from"./vendor-C9OS106b.js";import{B as k,C as ve,T as Se}from"./index-ClXO2Y0X.js";import{C as ge}from"./CheckboxGrid-DSzjAf8I.js";import{D as ye}from"./DivGrid-S19_9Box.js";import{e as we,t as pe,u as xe,G as Ee,n as _e,r as Ce,c as be}from"./useAutoGeneration-DvZIeIy6.js";const Y=(e,n)=>e.unstable_is?e.unstable_is(n):n===e,q=e=>"init"in e,Q=e=>!!e.write,F=e=>"v"in e||"e"in e,N=e=>{if("e"in e)throw e.e;return e.v},V=new WeakMap,H=e=>{var n;return W(e)&&!!((n=V.get(e))!=null&&n[0])},je=e=>{const n=V.get(e);n!=null&&n[0]&&(n[0]=!1,n[1].forEach(r=>r()))},ie=(e,n)=>{let r=V.get(e);if(!r){r=[!0,new Set],V.set(e,r);const s=()=>{r[0]=!1};e.then(s,s)}r[1].add(n)},W=e=>typeof(e==null?void 0:e.then)=="function",ce=(e,n,r)=>{r.p.has(e)||(r.p.add(e),n.then(()=>{r.p.delete(e)},()=>{r.p.delete(e)}))},X=(e,n,r)=>{const s=r(e),u="v"in s,d=s.v;if(W(n))for(const a of s.d.keys())ce(e,n,r(a));s.v=n,delete s.e,(!u||!Object.is(d,s.v))&&(++s.n,W(d)&&je(d))},m=(e,n,r)=>{var s;const u=new Set;for(const d of((s=r.get(e))==null?void 0:s.t)||[])r.has(d)&&u.add(d);for(const d of n.p)u.add(d);return u},Ie=Symbol(),Pe=(e=new WeakMap,n=new WeakMap,r=new WeakMap,s=new Set,u=new Set,d=new Set,a={},j=(v,...p)=>v.read(...p),C=(v,...p)=>v.write(...p),h=(v,p)=>{var _;return(_=v.unstable_onInit)==null?void 0:_.call(v,p)},y=(v,p)=>{var _;return(_=v.onMount)==null?void 0:_.call(v,p)},...w)=>{const v=w[0]||(t=>{let f=e.get(t);return f||(f={d:new Map,p:new Set,n:0},e.set(t,f),h==null||h(t,K)),f}),p=w[1]||(()=>{const t=[],f=l=>{try{l()}catch(c){t.push(c)}};do{a.f&&f(a.f);const l=new Set,c=l.add.bind(l);s.forEach(o=>{var i;return(i=n.get(o))==null?void 0:i.l.forEach(c)}),s.clear(),d.forEach(c),d.clear(),u.forEach(c),u.clear(),l.forEach(f),s.size&&_()}while(s.size||d.size||u.size);if(t.length)throw new AggregateError(t)}),_=w[2]||(()=>{const t=[],f=new WeakSet,l=new WeakSet,c=Array.from(s);for(;c.length;){const o=c[c.length-1],i=v(o);if(l.has(o)){c.pop();continue}if(f.has(o)){r.get(o)===i.n&&t.push([o,i]),l.add(o),c.pop();continue}f.add(o);for(const g of m(o,i,n))f.has(g)||c.push(g)}for(let o=t.length-1;o>=0;--o){const[i,g]=t[o];let x=!1;for(const P of g.d.keys())if(P!==i&&s.has(P)){x=!0;break}x&&(I(i),D(i)),r.delete(i)}}),I=w[3]||(t=>{var f;const l=v(t);if(F(l)&&(n.has(t)&&r.get(t)!==l.n||Array.from(l.d).every(([S,z])=>I(S).n===z)))return l;l.d.clear();let c=!0;const o=()=>{n.has(t)&&(D(t),_(),p())},i=S=>{var z;if(Y(t,S)){const J=v(S);if(!F(J))if(q(S))X(S,S.init,v);else throw new Error("no atom init");return N(J)}const M=I(S);try{return N(M)}finally{l.d.set(S,M.n),H(l.v)&&ce(t,l.v,M),(z=n.get(S))==null||z.t.add(t),c||o()}};let g,x;const P={get signal(){return g||(g=new AbortController),g.signal},get setSelf(){return!x&&Q(t)&&(x=(...S)=>{if(!c)try{return G(t,...S)}finally{_(),p()}}),x}},T=l.n;try{const S=j(t,i,P);return X(t,S,v),W(S)&&(ie(S,()=>g==null?void 0:g.abort()),S.then(o,o)),l}catch(S){return delete l.v,l.e=S,++l.n,l}finally{c=!1,T!==l.n&&r.get(t)===T&&(r.set(t,l.n),s.add(t),(f=a.c)==null||f.call(a,t))}}),O=w[4]||(t=>{const f=[t];for(;f.length;){const l=f.pop(),c=v(l);for(const o of m(l,c,n)){const i=v(o);r.set(o,i.n),f.push(o)}}}),G=w[5]||((t,...f)=>{let l=!0;const c=i=>N(I(i)),o=(i,...g)=>{var x;const P=v(i);try{if(Y(t,i)){if(!q(i))throw new Error("atom not writable");const T=P.n,S=g[0];X(i,S,v),D(i),T!==P.n&&(s.add(i),(x=a.c)==null||x.call(a,i),O(i));return}else return G(i,...g)}finally{l||(_(),p())}};try{return C(t,c,o,...f)}finally{l=!1}}),D=w[6]||(t=>{var f;const l=v(t),c=n.get(t);if(c&&!H(l.v)){for(const[o,i]of l.d)if(!c.d.has(o)){const g=v(o);L(o).t.add(t),c.d.add(o),i!==g.n&&(s.add(o),(f=a.c)==null||f.call(a,o),O(o))}for(const o of c.d||[])if(!l.d.has(o)){c.d.delete(o);const i=R(o);i==null||i.t.delete(t)}}}),L=w[7]||(t=>{var f;const l=v(t);let c=n.get(t);if(!c){I(t);for(const o of l.d.keys())L(o).t.add(t);if(c={l:new Set,d:new Set(l.d.keys()),t:new Set},n.set(t,c),(f=a.m)==null||f.call(a,t),Q(t)){const o=()=>{let i=!0;const g=(...x)=>{try{return G(t,...x)}finally{i||(_(),p())}};try{const x=y(t,g);x&&(c.u=()=>{i=!0;try{x()}finally{i=!1}})}finally{i=!1}};u.add(o)}}return c}),R=w[8]||(t=>{var f;const l=v(t);let c=n.get(t);if(c&&!c.l.size&&!Array.from(c.t).some(o=>{var i;return(i=n.get(o))==null?void 0:i.d.has(t)})){c.u&&d.add(c.u),c=void 0,n.delete(t),(f=a.u)==null||f.call(a,t);for(const o of l.d.keys()){const i=R(o);i==null||i.t.delete(t)}return}return c}),he=[e,n,r,s,u,d,a,j,C,h,y,v,p,_,I,O,G,D,L,R],K={get:t=>N(I(t)),set:(t,...f)=>{try{return G(t,...f)}finally{_(),p()}},sub:(t,f)=>{const c=L(t).l;return c.add(f),p(),()=>{c.delete(f),R(t),p()}}};return Object.defineProperty(K,Ie,{value:he}),K},Ae=Pe,ee=ie;let Ge=0;function De(e,n){const r=`atom${++Ge}`,s={toString(){return r}};return typeof e=="function"?s.read=e:(s.init=e,s.read=Le,s.write=Re),s}function Le(e){return e(this)}function Re(e,n,r){return n(this,typeof r=="function"?r(e(this)):r)}function le(){return Ae()}let U;function Te(){return U||(U=le()),U}const ue=b.createContext(void 0);function fe(e){return b.useContext(ue)||Te()}function ze({children:e,store:n}){const r=b.useRef(void 0);return!n&&!r.current&&(r.current=le()),b.createElement(ue.Provider,{value:n||r.current},e)}const $=e=>typeof(e==null?void 0:e.then)=="function",B=e=>{e.status||(e.status="pending",e.then(n=>{e.status="fulfilled",e.value=n},n=>{e.status="rejected",e.reason=n}))},Ne=oe.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(B(e),e)}),Z=new WeakMap,te=(e,n)=>{let r=Z.get(e);return r||(r=new Promise((s,u)=>{let d=e;const a=h=>y=>{d===h&&s(y)},j=h=>y=>{d===h&&u(y)},C=()=>{try{const h=n();$(h)?(Z.set(h,r),d=h,h.then(a(h),j(h)),ee(h,C)):s(h)}catch(h){u(h)}};e.then(a(e),j(e)),ee(e,C)}),Z.set(e,r)),r};function Ve(e,n){const{delay:r,unstable_promiseStatus:s=!oe.use}={},u=fe(),[[d,a,j],C]=b.useReducer(y=>{const w=u.get(e);return Object.is(y[0],w)&&y[1]===u&&y[2]===e?y:[w,u,e]},void 0,()=>[u.get(e),u,e]);let h=d;if((a!==u||j!==e)&&(C(),h=u.get(e)),b.useEffect(()=>{const y=u.sub(e,()=>{if(s)try{const w=u.get(e);$(w)&&B(te(w,()=>u.get(e)))}catch{}if(typeof r=="number"){setTimeout(C,r);return}C()});return C(),y},[u,e,r,s]),b.useDebugValue(h),$(h)){const y=te(h,()=>u.get(e));return s&&B(y),Ne(y)}return h}function ae(e,n){const r=fe();return b.useCallback((...u)=>r.set(e,...u),[r,e])}function We(e,n){return[Ve(e),ae(e)]}const de=De(we(30,30));var A=(e=>(e.CHECKBOX="checkbox",e.DIV="div",e))(A||{});function Oe({gridType:e,cellSize:n}){const[r,s]=We(de),u=(d,a)=>{s(j=>pe(j,[d,a]))};switch(e){case A.CHECKBOX:return E.jsx(ge,{grid:r,cellSize:n,toggleCell:u});case A.DIV:return E.jsx(ye,{grid:r,cellSize:n,toggleCell:u});default:throw new Error(`Unsupported grid type: ${e}`)}}function ne({text:e,gridType:n,state:r}){const[s,u]=r;return E.jsx(k,{text:e,onClick:()=>u(n),disabled:n===s})}const Ke=500;function Me(){const e=ae(de),n=()=>e(a=>_e(a)),r=()=>e(a=>Ce(a)),s=()=>e(a=>be(a)),[u,d]=xe(Ke,n);return E.jsx(Ee,{isAutoGenerating:u,toggleAutoGeneration:d,nextGeneration:n,randomize:r,clear:s})}const Xe="_root_12k38_1",Ue="_gridContainer_12k38_7",re={root:Xe,gridContainer:Ue},Ze=4,ke=30,$e=16,se=4;function Fe(){const e=b.useState(A.CHECKBOX),[n]=e,[r,s]=b.useState($e),u=()=>{s(a=>Math.max(a-se,Ze))},d=()=>{s(a=>Math.min(a+se,ke))};return E.jsx(ve,{title:"Jotai",subtitle:"State management",children:E.jsx(ze,{children:E.jsxs("div",{className:re.root,children:[E.jsxs(Se,{children:[E.jsx(ne,{text:"Checkbox grid",gridType:A.CHECKBOX,state:e}),E.jsx(ne,{text:"Div grid",gridType:A.DIV,state:e}),E.jsx(k,{text:"Reduce size",onClick:u}),E.jsx(k,{text:"Increase size",onClick:d})]}),E.jsx(Me,{}),E.jsx("div",{className:re.gridContainer,children:E.jsx(Oe,{gridType:n,cellSize:r})})]})})})}export{Fe as default};
