import{r as h,k as wt,j as i}from"./vendor-Dpbva39i.js";import{u as Dt,U as de,T as Ee}from"./UserContext-Db6phdeN.js";import{L as he,P as me,E as pe,B as Re,T as _e,C as ve}from"./index-CXMeMuMk.js";var zt={exports:{}},Jt={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y=h;function Te(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Se=typeof Object.is=="function"?Object.is:Te,ge=Y.useState,Ce=Y.useEffect,xe=Y.useLayoutEffect,we=Y.useDebugValue;function De(t,e){var n=e(),r=ge({inst:{value:n,getSnapshot:e}}),s=r[0].inst,o=r[1];return xe(function(){s.value=n,s.getSnapshot=e,mt(s)&&o({inst:s})},[t,n,e]),Ce(function(){return mt(s)&&o({inst:s}),t(function(){mt(s)&&o({inst:s})})},[t]),we(n),n}function mt(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Se(t,n)}catch{return!0}}function Oe(t,e){return e()}var be=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Oe:De;Jt.useSyncExternalStore=Y.useSyncExternalStore!==void 0?Y.useSyncExternalStore:be;zt.exports=Jt;var Le=zt.exports;const M=()=>{},D=M(),ut=Object,c=t=>t===D,I=t=>typeof t=="function",P=(t,e)=>({...t,...e}),je=t=>I(t.then),at=new WeakMap;let Ie=0;const et=t=>{const e=typeof t,n=t&&t.constructor,r=n==Date;let s,o;if(ut(t)===t&&!r&&n!=RegExp){if(s=at.get(t),s)return s;if(s=++Ie+"~",at.set(t,s),n==Array){for(s="@",o=0;o<t.length;o++)s+=et(t[o])+",";at.set(t,s)}if(n==ut){s="#";const u=ut.keys(t).sort();for(;!c(o=u.pop());)c(t[o])||(s+=o+":"+et(t[o])+",");at.set(t,s)}}else s=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return s},F=new WeakMap,pt={},ct={},Ot="undefined",ft=typeof window!=Ot,vt=typeof document!=Ot,Ae=()=>ft&&typeof window.requestAnimationFrame!=Ot,Yt=(t,e)=>{const n=F.get(t);return[()=>!c(e)&&t.get(e)||pt,r=>{if(!c(e)){const s=t.get(e);e in ct||(ct[e]=s),n[5](e,P(s,r),s||pt)}},n[6],()=>!c(e)&&e in ct?ct[e]:!c(e)&&t.get(e)||pt]};let Tt=!0;const ye=()=>Tt,[St,gt]=ft&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[M,M],Ne=()=>{const t=vt&&document.visibilityState;return c(t)||t!=="hidden"},Ve=t=>(vt&&document.addEventListener("visibilitychange",t),St("focus",t),()=>{vt&&document.removeEventListener("visibilitychange",t),gt("focus",t)}),Ue=t=>{const e=()=>{Tt=!0,t()},n=()=>{Tt=!1};return St("online",e),St("offline",n),()=>{gt("online",e),gt("offline",n)}},Fe={isOnline:ye,isVisible:Ne},Pe={initFocus:Ve,initReconnect:Ue},qt=!wt.useId,nt=!ft||"Deno"in window,We=t=>Ae()?window.requestAnimationFrame(t):setTimeout(t,1),lt=nt?h.useEffect:h.useLayoutEffect,Rt=typeof navigator<"u"&&navigator.connection,kt=!nt&&Rt&&(["slow-2g","2g"].includes(Rt.effectiveType)||Rt.saveData),bt=t=>{if(I(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?et(t):"",[t,e]};let Me=0;const Ct=()=>++Me,Xt=0,Zt=1,Qt=2,$e=3;var tt={__proto__:null,ERROR_REVALIDATE_EVENT:$e,FOCUS_EVENT:Xt,MUTATE_EVENT:Qt,RECONNECT_EVENT:Zt};async function te(...t){const[e,n,r,s]=t,o=P({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let u=o.populateCache;const E=o.rollbackOnError;let l=o.optimisticData;const L=x=>typeof E=="function"?E(x):E!==!1,S=o.throwOnError;if(I(n)){const x=n,R=[],A=e.keys();for(const v of A)!/^\$(inf|sub)\$/.test(v)&&x(e.get(v)._k)&&R.push(v);return Promise.all(R.map(_))}return _(n);async function _(x){const[R]=bt(x);if(!R)return;const[A,v]=Yt(e,R),[dt,a,rt,Z]=F.get(e),W=()=>{const j=dt[R];return(I(o.revalidate)?o.revalidate(A().data,x):o.revalidate!==!1)&&(delete rt[R],delete Z[R],j&&j[0])?j[0](Qt).then(()=>A().data):A().data};if(t.length<3)return W();let g=r,O;const q=Ct();a[R]=[q,0];const p=!c(l),k=A(),y=k.data,B=k._c,$=c(B)?y:B;if(p&&(l=I(l)?l($,y):l,v({data:l,_c:$})),I(g))try{g=g($)}catch(j){O=j}if(g&&je(g))if(g=await g.catch(j=>{O=j}),q!==a[R][0]){if(O)throw O;return g}else O&&p&&L(O)&&(u=!0,v({data:$,_c:D}));if(u&&!O)if(I(u)){const j=u(g,$);v({data:j,error:D,_c:D})}else v({data:g,error:D,_c:D});if(a[R][1]=Ct(),Promise.resolve(W()).then(()=>{v({_c:D})}),O){if(S)throw O;return}return g}}const Bt=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},ee=(t,e)=>{if(!F.has(t)){const n=P(Pe,e),r={},s=te.bind(D,t);let o=M;const u={},E=(S,_)=>{const x=u[S]||[];return u[S]=x,x.push(_),()=>x.splice(x.indexOf(_),1)},l=(S,_,x)=>{t.set(S,_);const R=u[S];if(R)for(const A of R)A(_,x)},L=()=>{if(!F.has(t)&&(F.set(t,[r,{},{},{},s,l,E]),!nt)){const S=n.initFocus(setTimeout.bind(D,Bt.bind(D,r,Xt))),_=n.initReconnect(setTimeout.bind(D,Bt.bind(D,r,Zt)));o=()=>{S&&S(),_&&_(),F.delete(t)}}};return L(),[t,s,L,o]}return[t,F.get(t)[4]]},qe=(t,e,n,r,s)=>{const o=n.errorRetryCount,u=s.retryCount,E=~~((Math.random()+.5)*(1<<(u<8?u:8)))*n.errorRetryInterval;!c(o)&&u>o||setTimeout(r,E,s)},ke=(t,e)=>et(t)==et(e),[Lt,Be]=ee(new Map),ne=P({onLoadingSlow:M,onSuccess:M,onError:M,onErrorRetry:qe,onDiscarded:M,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:kt?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:kt?5e3:3e3,compare:ke,isPaused:()=>!1,cache:Lt,mutate:Be,fallback:{}},Fe),se=(t,e)=>{const n=P(t,e);if(e){const{use:r,fallback:s}=t,{use:o,fallback:u}=e;r&&o&&(n.use=r.concat(o)),s&&u&&(n.fallback=P(s,u))}return n},xt=h.createContext({}),He=t=>{const{value:e}=t,n=h.useContext(xt),r=I(e),s=h.useMemo(()=>r?e(n):e,[r,n,e]),o=h.useMemo(()=>r?s:se(n,s),[r,n,s]),u=s&&s.provider,E=h.useRef(D);u&&!E.current&&(E.current=ee(u(o.cache||Lt),s));const l=E.current;return l&&(o.cache=l[0],o.mutate=l[1]),lt(()=>{if(l)return l[2]&&l[2](),l[3]},[]),h.createElement(xt.Provider,P(t,{value:o}))},Ge="$inf$",re=ft&&window.__SWR_DEVTOOLS_USE__,Ke=re?window.__SWR_DEVTOOLS_USE__:[],ze=()=>{re&&(window.__SWR_DEVTOOLS_REACT__=wt)},Je=t=>I(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],oe=()=>P(ne,h.useContext(xt)),Ye=t=>(e,n,r)=>t(e,n&&((...o)=>{const[u]=bt(e),[,,,E]=F.get(Lt);if(u.startsWith(Ge))return n(...o);const l=E[u];return c(l)?n(...o):(delete E[u],l)}),r),Xe=Ke.concat(Ye),Ze=t=>function(...n){const r=oe(),[s,o,u]=Je(n),E=se(r,u);let l=t;const{use:L}=E,S=(L||[]).concat(Xe);for(let _=S.length;_--;)l=S[_](l);return l(s,o||E.fetcher||null,E)},Qe=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}};ze();const Ht=wt.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)}),_t={dedupe:!0},tn=(t,e,n)=>{const{cache:r,compare:s,suspense:o,fallbackData:u,revalidateOnMount:E,revalidateIfStale:l,refreshInterval:L,refreshWhenHidden:S,refreshWhenOffline:_,keepPreviousData:x}=n,[R,A,v,dt]=F.get(r),[a,rt]=bt(t),Z=h.useRef(!1),W=h.useRef(!1),g=h.useRef(a),O=h.useRef(e),q=h.useRef(n),p=()=>q.current,k=()=>p().isVisible()&&p().isOnline(),[y,B,$,j]=Yt(r,a),H=h.useRef({}).current,ae=c(u)?n.fallback[a]:u,At=(f,d)=>{for(const C in H){const m=C;if(m==="data"){if(!s(f[m],d[m])&&(!c(f[m])||!s(it,d[m])))return!1}else if(d[m]!==f[m])return!1}return!0},yt=h.useMemo(()=>{const f=!a||!e?!1:c(E)?p().isPaused()||o?!1:c(l)?!0:l:E,d=w=>{const V=P(w);return delete V._k,f?{isValidating:!0,isLoading:!0,...V}:V},C=y(),m=j(),N=d(C),J=C===m?N:d(m);let T=N;return[()=>{const w=d(y());return At(w,T)?(T.data=w.data,T.isLoading=w.isLoading,T.isValidating=w.isValidating,T.error=w.error,T):(T=w,w)},()=>J]},[r,a]),G=Le.useSyncExternalStore(h.useCallback(f=>$(a,(d,C)=>{At(C,d)||f()}),[r,a]),yt[0],yt[1]),Nt=!Z.current,ce=R[a]&&R[a].length>0,K=G.data,z=c(K)?ae:K,ot=G.error,Vt=h.useRef(z),it=x?c(K)?Vt.current:K:z,Ut=ce&&!c(ot)?!1:Nt&&!c(E)?E:p().isPaused()?!1:o?c(z)?!1:l:c(z)||l,Ft=!!(a&&e&&Nt&&Ut),ue=c(G.isValidating)?Ft:G.isValidating,le=c(G.isLoading)?Ft:G.isLoading,Q=h.useCallback(async f=>{const d=O.current;if(!a||!d||W.current||p().isPaused())return!1;let C,m,N=!0;const J=f||{},T=!v[a]||!J.dedupe,w=()=>qt?!W.current&&a===g.current&&Z.current:a===g.current,V={isValidating:!1,isLoading:!1},Wt=()=>{B(V)},Mt=()=>{const b=v[a];b&&b[1]===m&&delete v[a]},$t={isValidating:!0};c(y().data)&&($t.isLoading=!0);try{if(T&&(B($t),n.loadingTimeout&&c(y().data)&&setTimeout(()=>{N&&w()&&p().onLoadingSlow(a,n)},n.loadingTimeout),v[a]=[d(rt),Ct()]),[C,m]=v[a],C=await C,T&&setTimeout(Mt,n.dedupingInterval),!v[a]||v[a][1]!==m)return T&&w()&&p().onDiscarded(a),!1;V.error=D;const b=A[a];if(!c(b)&&(m<=b[0]||m<=b[1]||b[1]===0))return Wt(),T&&w()&&p().onDiscarded(a),!1;const U=y().data;V.data=s(U,C)?U:C,T&&w()&&p().onSuccess(C,a,n)}catch(b){Mt();const U=p(),{shouldRetryOnError:Et}=U;U.isPaused()||(V.error=b,T&&w()&&(U.onError(b,a,U),(Et===!0||I(Et)&&Et(b))&&(!p().revalidateOnFocus||!p().revalidateOnReconnect||k())&&U.onErrorRetry(b,a,U,fe=>{const ht=R[a];ht&&ht[0]&&ht[0](tt.ERROR_REVALIDATE_EVENT,fe)},{retryCount:(J.retryCount||0)+1,dedupe:!0})))}return N=!1,Wt(),!0},[a,r]),Pt=h.useCallback((...f)=>te(r,g.current,...f),[]);if(lt(()=>{O.current=e,q.current=n,c(K)||(Vt.current=K)}),lt(()=>{if(!a)return;const f=Q.bind(D,_t);let d=0;const m=Qe(a,R,(N,J={})=>{if(N==tt.FOCUS_EVENT){const T=Date.now();p().revalidateOnFocus&&T>d&&k()&&(d=T+p().focusThrottleInterval,f())}else if(N==tt.RECONNECT_EVENT)p().revalidateOnReconnect&&k()&&f();else{if(N==tt.MUTATE_EVENT)return Q();if(N==tt.ERROR_REVALIDATE_EVENT)return Q(J)}});return W.current=!1,g.current=a,Z.current=!0,B({_k:rt}),Ut&&(c(z)||nt?f():We(f)),()=>{W.current=!0,m()}},[a]),lt(()=>{let f;function d(){const m=I(L)?L(y().data):L;m&&f!==-1&&(f=setTimeout(C,m))}function C(){!y().error&&(S||p().isVisible())&&(_||p().isOnline())?Q(_t).then(d):d()}return d(),()=>{f&&(clearTimeout(f),f=-1)}},[L,S,_,a]),h.useDebugValue(it),o&&c(z)&&a){if(!qt&&nt)throw new Error("Fallback data is required when using suspense in SSR.");O.current=e,q.current=n,W.current=!1;const f=dt[a];if(!c(f)){const d=Pt(f);Ht(d)}if(c(ot)){const d=Q(_t);c(it)||(d.status="fulfilled",d.value=!0),Ht(d)}else throw ot}return{mutate:Pt,get data(){return H.data=!0,it},get error(){return H.error=!0,ot},get isValidating(){return H.isValidating=!0,ue},get isLoading(){return H.isLoading=!0,le}}},en=ut.defineProperty(He,"defaultValue",{value:ne}),jt=Ze(tn);async function nn(t,e){return(await fetch(`https://jsonplaceholder.typicode.com/${t}`,e)).json()}var X=(t=>(t.USER_DETAILS="user-details",t.TODO_LIST="todo-list",t.LAST_UPDATED="last-updated",t))(X||{});const st={"user-details":t=>`users/${t}`,"todo-list":t=>`todos?userId=${t}`,"last-updated":()=>"lastUpdated"};function It(){const{userId:t}=Dt(),e=st[X.USER_DETAILS];return jt(e(t))}const sn="_loading_1f6xf_1",rn="_error_1f6xf_7",Gt={loading:sn,error:rn};function on(){const{isValidating:t,data:e,error:n}=It();return t?i.jsx("div",{className:Gt.loading,children:i.jsx(he,{})}):n?i.jsx("div",{className:Gt.error,children:"Oops! Something went wrong..."}):i.jsx(me,{data:e})}function ie(){const{userId:t}=Dt(),e=st[X.TODO_LIST];return jt(e(t))}function an(){const{data:t,mutate:e}=ie();return i.jsxs("table",{children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:i.jsx(pe,{emoji:"🔄",tooltip:"Refetch",onClick:()=>e()})}),i.jsx("th",{children:"Title"}),i.jsx("th",{children:"Completed"})]})}),i.jsx("tbody",{children:t==null?void 0:t.map((n,r)=>i.jsxs("tr",{children:[i.jsx("td",{children:r+1}),i.jsx("td",{children:n.title}),i.jsx("td",{children:n.completed?"✅":null})]},n.id))})]})}const cn="_avatar_jpqt5_1",un={avatar:cn};function ln(){const{data:t}=It();return((t==null?void 0:t.name)??"").split(" ").map(n=>n.charAt(0)).join("")}function fn(){const t=ln();return i.jsx("div",{className:un.avatar,children:t})}const dn={refreshInterval:3e3};function En(){return new Promise(t=>{t(new Date)})}function hn(){const t=st[X.LAST_UPDATED];return jt(t(),En,dn)}const mn="_lastUpdated_13tp4_1",pn={lastUpdated:mn};function Rn(){const{data:t}=hn(),e=(t==null?void 0:t.toLocaleTimeString())??"--";return i.jsxs("div",{className:pn.lastUpdated,children:["Last updated:",i.jsx("br",{}),i.jsx("strong",{children:e})]})}function _n(){const{userId:t}=Dt(),{mutate:e}=oe(),n=()=>{e(st[X.USER_DETAILS](t)),e(st[X.TODO_LIST](t))};return i.jsx(Re,{text:"Refresh all",onClick:n})}const vn="_todoCounter_1n29n_1",Tn={todoCounter:vn};function Sn(){const{data:t}=ie(),e=(t==null?void 0:t.length)??0;return i.jsxs("div",{className:Tn.todoCounter,children:["Todos:",i.jsx("br",{}),i.jsx("strong",{children:e})]})}const gn="_userName_1v8vf_1",Cn="_userEmail_1v8vf_5",Kt={userName:gn,userEmail:Cn};function xn(){const{data:t}=It();return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:Kt.userName,children:t==null?void 0:t.name}),i.jsx("div",{className:Kt.userEmail,children:t==null?void 0:t.email})]})}function wn(){return i.jsxs(_e,{children:[i.jsx(fn,{}),i.jsx("div",{style:{flex:1},children:i.jsx(xn,{})}),i.jsx(Sn,{}),i.jsx(Rn,{}),i.jsx(_n,{})]})}const Dn=["👤 User Profile","✅ Todos List"];function jn(){return i.jsx(ve,{title:"SWR",subtitle:"Data fetching",children:i.jsx(en,{value:{fetcher:nn},children:i.jsxs(de,{children:[i.jsx(wn,{}),i.jsxs(Ee,{tabs:Dn,children:[i.jsx(on,{}),i.jsx(an,{})]})]})})})}export{jn as default};
