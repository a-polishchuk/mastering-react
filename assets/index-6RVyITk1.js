import{r as h,R as wt,a as fe,j as i,L as Ee,P as he,E as pe,B as me,T as Re,C as _e}from"./index-DVW_wb3u.js";import{u as Dt,T as Te}from"./UserContext-Bj9CiRa_.js";var zt={exports:{}},Jt={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y=h;function ve(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Se=typeof Object.is=="function"?Object.is:ve,ge=Y.useState,Ce=Y.useEffect,xe=Y.useLayoutEffect,we=Y.useDebugValue;function De(t,e){var n=e(),r=ge({inst:{value:n,getSnapshot:e}}),s=r[0].inst,o=r[1];return xe(function(){s.value=n,s.getSnapshot=e,pt(s)&&o({inst:s})},[t,n,e]),Ce(function(){return pt(s)&&o({inst:s}),t(function(){pt(s)&&o({inst:s})})},[t]),we(n),n}function pt(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Se(t,n)}catch{return!0}}function Oe(t,e){return e()}var be=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Oe:De;Jt.useSyncExternalStore=Y.useSyncExternalStore!==void 0?Y.useSyncExternalStore:be;zt.exports=Jt;var Le=zt.exports;const M=()=>{},D=M(),ut=Object,c=t=>t===D,A=t=>typeof t=="function",P=(t,e)=>({...t,...e}),Ie=t=>A(t.then),at=new WeakMap;let Ae=0;const et=t=>{const e=typeof t,n=t&&t.constructor,r=n==Date;let s,o;if(ut(t)===t&&!r&&n!=RegExp){if(s=at.get(t),s)return s;if(s=++Ae+"~",at.set(t,s),n==Array){for(s="@",o=0;o<t.length;o++)s+=et(t[o])+",";at.set(t,s)}if(n==ut){s="#";const u=ut.keys(t).sort();for(;!c(o=u.pop());)c(t[o])||(s+=o+":"+et(t[o])+",");at.set(t,s)}}else s=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return s},F=new WeakMap,mt={},ct={},Ot="undefined",dt=typeof window!=Ot,Tt=typeof document!=Ot,je=()=>dt&&typeof window.requestAnimationFrame!=Ot,Yt=(t,e)=>{const n=F.get(t);return[()=>!c(e)&&t.get(e)||mt,r=>{if(!c(e)){const s=t.get(e);e in ct||(ct[e]=s),n[5](e,P(s,r),s||mt)}},n[6],()=>!c(e)&&e in ct?ct[e]:!c(e)&&t.get(e)||mt]};let vt=!0;const ye=()=>vt,[St,gt]=dt&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[M,M],Ne=()=>{const t=Tt&&document.visibilityState;return c(t)||t!=="hidden"},Ve=t=>(Tt&&document.addEventListener("visibilitychange",t),St("focus",t),()=>{Tt&&document.removeEventListener("visibilitychange",t),gt("focus",t)}),Ue=t=>{const e=()=>{vt=!0,t()},n=()=>{vt=!1};return St("online",e),St("offline",n),()=>{gt("online",e),gt("offline",n)}},Fe={isOnline:ye,isVisible:Ne},Pe={initFocus:Ve,initReconnect:Ue},kt=!wt.useId,nt=!dt||"Deno"in window,We=t=>je()?window.requestAnimationFrame(t):setTimeout(t,1),lt=nt?h.useEffect:h.useLayoutEffect,Rt=typeof navigator<"u"&&navigator.connection,qt=!nt&&Rt&&(["slow-2g","2g"].includes(Rt.effectiveType)||Rt.saveData),bt=t=>{if(A(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?et(t):"",[t,e]};let Me=0;const Ct=()=>++Me,Xt=0,Zt=1,Qt=2,$e=3;var tt={__proto__:null,ERROR_REVALIDATE_EVENT:$e,FOCUS_EVENT:Xt,MUTATE_EVENT:Qt,RECONNECT_EVENT:Zt};async function te(...t){const[e,n,r,s]=t,o=P({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let u=o.populateCache;const E=o.rollbackOnError;let l=o.optimisticData;const L=x=>typeof E=="function"?E(x):E!==!1,S=o.throwOnError;if(A(n)){const x=n,R=[],j=e.keys();for(const T of j)!/^\$(inf|sub)\$/.test(T)&&x(e.get(T)._k)&&R.push(T);return Promise.all(R.map(_))}return _(n);async function _(x){const[R]=bt(x);if(!R)return;const[j,T]=Yt(e,R),[ft,a,rt,Z]=F.get(e),W=()=>{const I=ft[R];return(A(o.revalidate)?o.revalidate(j().data,x):o.revalidate!==!1)&&(delete rt[R],delete Z[R],I&&I[0])?I[0](Qt).then(()=>j().data):j().data};if(t.length<3)return W();let g=r,O;const k=Ct();a[R]=[k,0];const m=!c(l),q=j(),y=q.data,B=q._c,$=c(B)?y:B;if(m&&(l=A(l)?l($,y):l,T({data:l,_c:$})),A(g))try{g=g($)}catch(I){O=I}if(g&&Ie(g))if(g=await g.catch(I=>{O=I}),k!==a[R][0]){if(O)throw O;return g}else O&&m&&L(O)&&(u=!0,T({data:$,_c:D}));if(u&&!O)if(A(u)){const I=u(g,$);T({data:I,error:D,_c:D})}else T({data:g,error:D,_c:D});if(a[R][1]=Ct(),Promise.resolve(W()).then(()=>{T({_c:D})}),O){if(S)throw O;return}return g}}const Bt=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},ee=(t,e)=>{if(!F.has(t)){const n=P(Pe,e),r={},s=te.bind(D,t);let o=M;const u={},E=(S,_)=>{const x=u[S]||[];return u[S]=x,x.push(_),()=>x.splice(x.indexOf(_),1)},l=(S,_,x)=>{t.set(S,_);const R=u[S];if(R)for(const j of R)j(_,x)},L=()=>{if(!F.has(t)&&(F.set(t,[r,{},{},{},s,l,E]),!nt)){const S=n.initFocus(setTimeout.bind(D,Bt.bind(D,r,Xt))),_=n.initReconnect(setTimeout.bind(D,Bt.bind(D,r,Zt)));o=()=>{S&&S(),_&&_(),F.delete(t)}}};return L(),[t,s,L,o]}return[t,F.get(t)[4]]},ke=(t,e,n,r,s)=>{const o=n.errorRetryCount,u=s.retryCount,E=~~((Math.random()+.5)*(1<<(u<8?u:8)))*n.errorRetryInterval;!c(o)&&u>o||setTimeout(r,E,s)},qe=(t,e)=>et(t)==et(e),[Lt,Be]=ee(new Map),ne=P({onLoadingSlow:M,onSuccess:M,onError:M,onErrorRetry:ke,onDiscarded:M,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:qt?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:qt?5e3:3e3,compare:qe,isPaused:()=>!1,cache:Lt,mutate:Be,fallback:{}},Fe),se=(t,e)=>{const n=P(t,e);if(e){const{use:r,fallback:s}=t,{use:o,fallback:u}=e;r&&o&&(n.use=r.concat(o)),s&&u&&(n.fallback=P(s,u))}return n},xt=h.createContext({}),He=t=>{const{value:e}=t,n=h.useContext(xt),r=A(e),s=h.useMemo(()=>r?e(n):e,[r,n,e]),o=h.useMemo(()=>r?s:se(n,s),[r,n,s]),u=s&&s.provider,E=h.useRef(D);u&&!E.current&&(E.current=ee(u(o.cache||Lt),s));const l=E.current;return l&&(o.cache=l[0],o.mutate=l[1]),lt(()=>{if(l)return l[2]&&l[2](),l[3]},[]),h.createElement(xt.Provider,P(t,{value:o}))},Ge="$inf$",re=dt&&window.__SWR_DEVTOOLS_USE__,Ke=re?window.__SWR_DEVTOOLS_USE__:[],ze=()=>{re&&(window.__SWR_DEVTOOLS_REACT__=wt)},Je=t=>A(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],oe=()=>P(ne,h.useContext(xt)),Ye=t=>(e,n,r)=>t(e,n&&((...o)=>{const[u]=bt(e),[,,,E]=F.get(Lt);if(u.startsWith(Ge))return n(...o);const l=E[u];return c(l)?n(...o):(delete E[u],l)}),r),Xe=Ke.concat(Ye),Ze=t=>function(...n){const r=oe(),[s,o,u]=Je(n),E=se(r,u);let l=t;const{use:L}=E,S=(L||[]).concat(Xe);for(let _=S.length;_--;)l=S[_](l);return l(s,o||E.fetcher||null,E)},Qe=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}};ze();const Ht=wt.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)}),_t={dedupe:!0},tn=(t,e,n)=>{const{cache:r,compare:s,suspense:o,fallbackData:u,revalidateOnMount:E,revalidateIfStale:l,refreshInterval:L,refreshWhenHidden:S,refreshWhenOffline:_,keepPreviousData:x}=n,[R,j,T,ft]=F.get(r),[a,rt]=bt(t),Z=h.useRef(!1),W=h.useRef(!1),g=h.useRef(a),O=h.useRef(e),k=h.useRef(n),m=()=>k.current,q=()=>m().isVisible()&&m().isOnline(),[y,B,$,I]=Yt(r,a),H=h.useRef({}).current,ae=c(u)?n.fallback[a]:u,jt=(d,f)=>{for(const C in H){const p=C;if(p==="data"){if(!s(d[p],f[p])&&(!c(d[p])||!s(it,f[p])))return!1}else if(f[p]!==d[p])return!1}return!0},yt=h.useMemo(()=>{const d=!a||!e?!1:c(E)?m().isPaused()||o?!1:c(l)?!0:l:E,f=w=>{const V=P(w);return delete V._k,d?{isValidating:!0,isLoading:!0,...V}:V},C=y(),p=I(),N=f(C),J=C===p?N:f(p);let v=N;return[()=>{const w=f(y());return jt(w,v)?(v.data=w.data,v.isLoading=w.isLoading,v.isValidating=w.isValidating,v.error=w.error,v):(v=w,w)},()=>J]},[r,a]),G=Le.useSyncExternalStore(h.useCallback(d=>$(a,(f,C)=>{jt(C,f)||d()}),[r,a]),yt[0],yt[1]),Nt=!Z.current,ce=R[a]&&R[a].length>0,K=G.data,z=c(K)?ae:K,ot=G.error,Vt=h.useRef(z),it=x?c(K)?Vt.current:K:z,Ut=ce&&!c(ot)?!1:Nt&&!c(E)?E:m().isPaused()?!1:o?c(z)?!1:l:c(z)||l,Ft=!!(a&&e&&Nt&&Ut),ue=c(G.isValidating)?Ft:G.isValidating,le=c(G.isLoading)?Ft:G.isLoading,Q=h.useCallback(async d=>{const f=O.current;if(!a||!f||W.current||m().isPaused())return!1;let C,p,N=!0;const J=d||{},v=!T[a]||!J.dedupe,w=()=>kt?!W.current&&a===g.current&&Z.current:a===g.current,V={isValidating:!1,isLoading:!1},Wt=()=>{B(V)},Mt=()=>{const b=T[a];b&&b[1]===p&&delete T[a]},$t={isValidating:!0};c(y().data)&&($t.isLoading=!0);try{if(v&&(B($t),n.loadingTimeout&&c(y().data)&&setTimeout(()=>{N&&w()&&m().onLoadingSlow(a,n)},n.loadingTimeout),T[a]=[f(rt),Ct()]),[C,p]=T[a],C=await C,v&&setTimeout(Mt,n.dedupingInterval),!T[a]||T[a][1]!==p)return v&&w()&&m().onDiscarded(a),!1;V.error=D;const b=j[a];if(!c(b)&&(p<=b[0]||p<=b[1]||b[1]===0))return Wt(),v&&w()&&m().onDiscarded(a),!1;const U=y().data;V.data=s(U,C)?U:C,v&&w()&&m().onSuccess(C,a,n)}catch(b){Mt();const U=m(),{shouldRetryOnError:Et}=U;U.isPaused()||(V.error=b,v&&w()&&(U.onError(b,a,U),(Et===!0||A(Et)&&Et(b))&&(!m().revalidateOnFocus||!m().revalidateOnReconnect||q())&&U.onErrorRetry(b,a,U,de=>{const ht=R[a];ht&&ht[0]&&ht[0](tt.ERROR_REVALIDATE_EVENT,de)},{retryCount:(J.retryCount||0)+1,dedupe:!0})))}return N=!1,Wt(),!0},[a,r]),Pt=h.useCallback((...d)=>te(r,g.current,...d),[]);if(lt(()=>{O.current=e,k.current=n,c(K)||(Vt.current=K)}),lt(()=>{if(!a)return;const d=Q.bind(D,_t);let f=0;const p=Qe(a,R,(N,J={})=>{if(N==tt.FOCUS_EVENT){const v=Date.now();m().revalidateOnFocus&&v>f&&q()&&(f=v+m().focusThrottleInterval,d())}else if(N==tt.RECONNECT_EVENT)m().revalidateOnReconnect&&q()&&d();else{if(N==tt.MUTATE_EVENT)return Q();if(N==tt.ERROR_REVALIDATE_EVENT)return Q(J)}});return W.current=!1,g.current=a,Z.current=!0,B({_k:rt}),Ut&&(c(z)||nt?d():We(d)),()=>{W.current=!0,p()}},[a]),lt(()=>{let d;function f(){const p=A(L)?L(y().data):L;p&&d!==-1&&(d=setTimeout(C,p))}function C(){!y().error&&(S||m().isVisible())&&(_||m().isOnline())?Q(_t).then(f):f()}return f(),()=>{d&&(clearTimeout(d),d=-1)}},[L,S,_,a]),h.useDebugValue(it),o&&c(z)&&a){if(!kt&&nt)throw new Error("Fallback data is required when using suspense in SSR.");O.current=e,k.current=n,W.current=!1;const d=ft[a];if(!c(d)){const f=Pt(d);Ht(f)}if(c(ot)){const f=Q(_t);c(it)||(f.status="fulfilled",f.value=!0),Ht(f)}else throw ot}return{mutate:Pt,get data(){return H.data=!0,it},get error(){return H.error=!0,ot},get isValidating(){return H.isValidating=!0,ue},get isLoading(){return H.isLoading=!0,le}}},en=ut.defineProperty(He,"defaultValue",{value:ne}),It=Ze(tn),nn=fe.create({baseURL:"https://jsonplaceholder.typicode.com/"});async function sn(t){return(await nn.get(t)).data}var X=(t=>(t.USER_DETAILS="user-details",t.TODO_LIST="todo-list",t.LAST_UPDATED="last-updated",t))(X||{});const st={"user-details":t=>`users/${t}`,"todo-list":t=>`todos?userId=${t}`,"last-updated":()=>"lastUpdated"};function At(){const t=Dt(),e=st[X.USER_DETAILS];return It(e(t))}const rn="_loading_kg1qp_1",on="_error_kg1qp_7",Gt={loading:rn,error:on};function an(){const{isValidating:t,data:e,error:n}=At();return t?i.jsx("div",{className:Gt.loading,children:i.jsx(Ee,{})}):n?i.jsx("div",{className:Gt.error,children:"Oops! Something went wrong..."}):i.jsx(he,{data:e})}function ie(){const t=Dt(),e=st[X.TODO_LIST];return It(e(t))}function cn(){const{data:t,mutate:e}=ie();return i.jsxs("table",{children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:i.jsx(pe,{emoji:"🔄",tooltip:"Refetch",onClick:()=>e()})}),i.jsx("th",{children:"Title"}),i.jsx("th",{children:"Completed"})]})}),i.jsx("tbody",{children:t==null?void 0:t.map((n,r)=>i.jsxs("tr",{children:[i.jsx("td",{children:r+1}),i.jsx("td",{children:n.title}),i.jsx("td",{children:n.completed?"✅":null})]},n.id))})]})}const un="_avatar_1ar4j_1",ln={avatar:un};function dn(){const{data:t}=At();return((t==null?void 0:t.name)??"").split(" ").map(n=>n.charAt(0)).join("")}function fn(){const t=dn();return i.jsx("div",{className:ln.avatar,children:t})}const En={refreshInterval:3e3};function hn(){return new Promise(t=>{t(new Date)})}function pn(){const t=st[X.LAST_UPDATED];return It(t(),hn,En)}const mn="_lastUpdated_v40lk_1",Rn={lastUpdated:mn};function _n(){const{data:t}=pn(),e=(t==null?void 0:t.toLocaleTimeString())??"--";return i.jsxs("div",{className:Rn.lastUpdated,children:["Last updated:",i.jsx("br",{}),i.jsx("strong",{children:e})]})}function Tn(){const t=Dt(),{mutate:e}=oe(),n=()=>{e(st[X.USER_DETAILS](t)),e(st[X.TODO_LIST](t))};return i.jsx(me,{text:"Refresh all",onClick:n})}const vn="_todoCounter_1ecl3_1",Sn={todoCounter:vn};function gn(){const{data:t}=ie(),e=(t==null?void 0:t.length)??0;return i.jsxs("div",{className:Sn.todoCounter,children:["Todos:",i.jsx("br",{}),i.jsx("strong",{children:e})]})}const Cn="_userName_6ppoc_1",xn="_userEmail_6ppoc_5",Kt={userName:Cn,userEmail:xn};function wn(){const{data:t}=At();return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:Kt.userName,children:t==null?void 0:t.name}),i.jsx("div",{className:Kt.userEmail,children:t==null?void 0:t.email})]})}function Dn(){return i.jsxs(Re,{children:[i.jsx(fn,{}),i.jsx("div",{style:{flex:1},children:i.jsx(wn,{})}),i.jsx(gn,{}),i.jsx(_n,{}),i.jsx(Tn,{})]})}const On=["👤 User Profile","✅ Todos List"];function In(){return i.jsx(_e,{title:"SWR",subtitle:"Data fetching",children:i.jsxs(en,{value:{fetcher:sn},children:[i.jsx(Dn,{}),i.jsxs(Te,{tabs:On,children:[i.jsx(an,{}),i.jsx(cn,{})]})]})})}export{In as default};
